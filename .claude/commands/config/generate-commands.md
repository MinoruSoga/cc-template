# カスタムコマンド生成

対象プロジェクト: $ARGUMENTS

## 参照ドキュメント

生成時は以下を必ず参照:

- **テンプレート:** `/Users/minoru/Dev/cc/cc-news/Template/.claude/commands/`
- **ガイド:** `/Users/minoru/Dev/cc/cc-news/practice/05-custom-commands.md`

## 生成手順

### 1. プロジェクト分析

以下を確認して必要なコマンドを判定:

- プロジェクトタイプ（Web App, CLI, Library, API）
- 技術スタック
- 既存のスクリプト（package.json scripts, Makefile等）
- テストフレームワーク
- デプロイ方法

### 2. 既存コマンドの確認

既存 `.claude/commands/` がある場合:

1. 現在のコマンド一覧を取得
2. 既存コマンドは保持
3. 不足している推奨コマンドを追加提案

### 3. コマンド生成

## 全プロジェクト共通コマンド

### review.md（コードレビュー）

```markdown
# コードレビュー

現在ステージングされている変更をレビューしてください。

## チェックリスト

### コード品質
- [ ] 命名規則に従っている
- [ ] 関数が単一責任を持つ
- [ ] コードの重複がない

### セキュリティ
- [ ] 入力バリデーション
- [ ] 機密情報の露出がない

### パフォーマンス
- [ ] N+1クエリがない
- [ ] 不要な再レンダリングがない

## 出力形式

各問題について:
- ファイル名と行番号
- 問題の説明
- 推奨される修正
- 重要度（Critical/Major/Minor）
```

### debug.md（バグ調査）

```markdown
# デバッグ調査

問題: $ARGUMENTS

## 調査手順

1. エラーメッセージを分析
2. 関連するコードを特定
3. 最近の変更を確認（git log）
4. 再現手順を特定

## 出力形式

### 問題の概要
[説明]

### 根本原因
[分析結果]

### 影響範囲
[影響を受ける機能]

### 解決策
[具体的な修正方法]

### 予防策
[再発防止の推奨事項]
```

### status.md（進捗確認）

```markdown
# 進捗状況確認

以下を実行して現在の状況を報告:

1. `git status` で変更状況を確認
2. `git log --oneline -5` で最近のコミットを確認
3. `claude-progress.txt` があれば内容を表示

## 出力形式

### 現在の状態
- ブランチ: [ブランチ名]
- 未コミットの変更: [あり/なし]
- 最新コミット: [コミットメッセージ]

### 進捗サマリー
[進捗ファイルからの情報]

### 次のステップ
[推奨アクション]
```

## プロジェクトタイプ別コマンド

### Web App

#### test.md

```markdown
# テスト実行

$ARGUMENTS のテストを実行してください。

## 手順

1. 対象ファイル/ディレクトリを特定
2. 関連するテストファイルを検索
3. テストを実行
4. 結果を分析

## 出力

- 実行したテスト数
- 成功/失敗数
- 失敗したテストの詳細
- カバレッジ（利用可能な場合）
```

#### deploy.md

```markdown
# デプロイ準備

$ARGUMENTS 環境へのデプロイを準備してください。

## チェックリスト

- [ ] テストが全て通過
- [ ] ビルドが成功
- [ ] 環境変数の確認
- [ ] マイグレーションの確認

## 手順

1. 現在のブランチ状態を確認
2. テストを実行
3. ビルドを実行
4. デプロイ準備完了を報告
```

#### gen-test.md

```markdown
# テスト生成

$ARGUMENTS のテストを生成してください。

## テスト方針

- 正常系
- 境界値
- 異常系
- エッジケース

## 出力

- テストファイルの内容
- 必要なモックのセットアップ
- 実行コマンド
```

### Library

#### publish.md

```markdown
# パッケージ公開準備

## チェックリスト

- [ ] バージョン番号の更新
- [ ] CHANGELOG の更新
- [ ] テストの実行
- [ ] ビルドの確認
- [ ] README の更新

## 手順

1. 現在のバージョンを確認
2. 変更内容をまとめる
3. 公開準備の確認事項をリスト
```

#### docs.md

```markdown
# ドキュメント生成

$ARGUMENTS のドキュメントを生成してください。

## 生成内容

1. 関数・クラスの概要
2. パラメータの説明
3. 戻り値の説明
4. 使用例

## 形式

JSDoc/TSDoc形式
```

### API

#### api-test.md

```markdown
# APIテスト

$ARGUMENTS のエンドポイントをテストしてください。

## テスト項目

- 正常なリクエスト
- 認証エラー
- バリデーションエラー
- 存在しないリソース

## 出力

各エンドポイントのテスト結果
```

#### migrate.md

```markdown
# DBマイグレーション

## 手順

1. 現在のマイグレーション状態を確認
2. 保留中のマイグレーションをリスト
3. マイグレーション実行の確認

## 注意事項

- 本番環境では慎重に
- バックアップの確認
```

## コマンドファイル形式

```markdown
# コマンド名

[コマンドの説明]

## 入力

$ARGUMENTS: [パラメータの説明]

## 手順

1. [ステップ1]
2. [ステップ2]
...

## 出力形式

[期待される出力の形式]

## 注意事項

- [注意点]
```

## マージ戦略

既存コマンドがある場合:

1. **既存コマンド:** そのまま保持
2. **名前衝突:** 既存を優先
3. **推奨コマンド:** 不足分のみ追加

## 出力

1. 推奨コマンド一覧を表示
2. 各コマンドのプレビュー
3. ユーザー確認後に作成

## 配置場所

`[プロジェクトルート]/.claude/commands/`

## 使用方法

```bash
/review          # コードレビュー
/debug エラー内容  # バグ調査
/test src/utils  # テスト実行
/deploy staging  # デプロイ準備
```
