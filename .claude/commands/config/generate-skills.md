# Agent Skills 生成

対象プロジェクト: $ARGUMENTS

## 参照ドキュメント

生成時は以下を必ず参照:

- **テンプレート:** `/Users/minoru/Dev/cc/cc-news/Template/.claude/skills/`
- **ガイド:** `/Users/minoru/Dev/cc/cc-news/practice/02-agent-skills-setup.md`

## 生成手順

### 1. プロジェクト分析

以下を確認して必要なスキルを判定:

- 技術スタック
- 主要な作業パターン
- チーム規模・ワークフロー
- 特殊な要件

### 2. 既存スキルの確認

既存 `.claude/skills/` がある場合:

1. 現在のスキル一覧を取得
2. 既存スキルは保持
3. 不足している推奨スキルを追加提案

### 3. スキル生成

## スキルファイル形式

各スキルは以下の構造:

```
.claude/skills/
└── skill-name/
    ├── SKILL.md      # スキル定義（必須）
    ├── examples/     # 使用例（オプション）
    └── templates/    # テンプレート（オプション）
```

### SKILL.md テンプレート

```markdown
# [スキル名]

## 概要

[スキルの目的と機能の説明]

## トリガー

このスキルは以下の場合に使用:
- [トリガー条件1]
- [トリガー条件2]

## 入力

- [必要な入力1]
- [必要な入力2]

## 処理手順

1. [ステップ1]
2. [ステップ2]
3. [ステップ3]

## 出力形式

[期待される出力の形式]

## 例

### 入力例
[具体的な入力例]

### 出力例
[具体的な出力例]

## 注意事項

- [注意点1]
- [注意点2]
```

## 全プロジェクト共通スキル

### generating-commits/SKILL.md

```markdown
# コミットメッセージ生成

## 概要

変更内容を分析し、適切なコミットメッセージを生成します。

## トリガー

- 「コミット」「commit」というキーワード
- git add 後のコミット作成時

## 処理手順

1. `git diff --staged` で変更内容を取得
2. 変更の種類を分類（feat/fix/refactor/docs/test/chore）
3. 影響範囲を特定
4. コミットメッセージを生成

## 出力形式

```
<type>(<scope>): <subject>

<body>

<footer>
```

## Conventional Commits

| タイプ | 説明 |
|--------|------|
| feat | 新機能 |
| fix | バグ修正 |
| refactor | リファクタリング |
| docs | ドキュメント |
| test | テスト |
| chore | その他 |

## 例

### 入力
`git diff --staged` の出力

### 出力
```
feat(auth): add password reset functionality

- Add forgot password form
- Implement email sending
- Add reset password endpoint

Closes #123
```
```

### reviewing-code/SKILL.md

```markdown
# コードレビュー

## 概要

コード変更をレビューし、問題点と改善提案を提供します。

## トリガー

- 「レビュー」「review」というキーワード
- PR作成時

## チェック項目

### コード品質
- 命名規則
- 単一責任原則
- コードの重複

### セキュリティ
- 入力バリデーション
- 認証・認可
- 機密情報の取り扱い

### パフォーマンス
- N+1クエリ
- 不要な計算
- メモリ使用

### テスト
- テストカバレッジ
- エッジケース

## 出力形式

### [Critical/Major/Minor] - [問題の種類]

**ファイル:** `path/to/file.ts:123`

**問題:** [問題の説明]

**推奨:** [修正方法]
```

## 技術スタック別スキル

### database/SKILL.md（DB使用時）

```markdown
# データベース管理

## 概要

データベース関連の操作を支援します。

## トリガー

- スキーマ変更時
- マイグレーション作成時
- クエリ最適化時

## 機能

### スキーマ分析
- 現在のスキーマを読み取り
- リレーションの可視化
- インデックス提案

### マイグレーション
- 変更内容の検出
- マイグレーションファイル生成
- ロールバック計画

### クエリ最適化
- N+1検出
- インデックス提案
- クエリ書き換え

## 対応ORM

- Prisma
- TypeORM
- Drizzle
- SQLAlchemy
- Django ORM
```

### testing/SKILL.md（テストフレームワーク使用時）

```markdown
# テスト作成支援

## 概要

テストの作成と実行を支援します。

## トリガー

- 「テスト」「test」というキーワード
- 新機能実装後

## 機能

### テスト生成
- 正常系テスト
- 異常系テスト
- 境界値テスト
- モック設定

### カバレッジ分析
- 未テスト箇所の特定
- カバレッジ向上提案

## テストパターン

### ユニットテスト
```typescript
describe('function', () => {
  it('should [expected behavior]', () => {
    // Arrange
    // Act
    // Assert
  });
});
```

### 統合テスト
[統合テストのパターン]

### E2Eテスト
[E2Eテストのパターン]
```

### deployment/SKILL.md（デプロイ設定時）

```markdown
# デプロイメント支援

## 概要

デプロイ準備と実行を支援します。

## トリガー

- 「デプロイ」「deploy」というキーワード
- リリース準備時

## チェックリスト

### プリデプロイ
- [ ] テスト通過
- [ ] ビルド成功
- [ ] 環境変数確認
- [ ] マイグレーション確認

### デプロイ
- [ ] バージョンタグ
- [ ] リリースノート
- [ ] ロールバック計画

### ポストデプロイ
- [ ] ヘルスチェック
- [ ] ログ監視
- [ ] メトリクス確認
```

## マージ戦略

既存スキルがある場合:

1. **既存スキル:** そのまま保持
2. **名前衝突:** 既存を優先
3. **推奨スキル:** 不足分のみ追加

## 出力

1. 推奨スキル一覧を表示
2. 各スキルのSKILL.mdプレビュー
3. ユーザー確認後に作成

## 配置場所

`[プロジェクトルート]/.claude/skills/[skill-name]/SKILL.md`

## 使用方法

スキルは以下の方法で呼び出される:

1. **自動:** トリガーキーワードで自動起動
2. **明示的:** 「[スキル名]スキルを使って...」

## 注意事項

- スキルは段階的情報開示を活用
- 大きなスキルは複数に分割を検討
- プロジェクト固有の知識を含める
